import{d as x,i as _,a as k,Z as m,m as i,bi as f,Y as z,g as h,q as C,A as M,k as o,bj as W,o as j,b as S,ad as s,ag as l,ah as H,ap as $,_ as B}from"./_plugin-vue_export-helper-99b8f513.js";import{r as D}from"./recording-f0aa678d.js";const E=x({__name:"WebCamera",setup(V){_(k);const e=m("slidev-webcam-size",Math.round(Math.min(window.innerHeight,window.innerWidth/8))),a=m("slidev-webcam-pos",{x:window.innerWidth-e.value-30,y:window.innerHeight-e.value-30},void 0,{deep:!0}),d=i(),u=i(),r=i(),{streamCamera:c,showAvatar:w}=D,{style:p}=f(d,{initialValue:a,onMove({x:n,y:t}){a.value.x=n,a.value.y=t}}),{isDragging:y}=f(u,{onMove({x:n,y:t}){e.value=Math.max(10,Math.min(n-a.value.x,t-a.value.y)/.8536)}});z(()=>{r.value&&(r.value.srcObject=c.value)},{flush:"post"});const b=h(()=>({width:`${e.value}px`,height:`${e.value}px`})),g=h(()=>({width:"14px",height:"14px",top:`${e.value*.8536-7}px`,left:`${e.value*.8536-7}px`,cursor:"nwse-resize"}));function v(){a.value.x>=window.innerWidth&&(a.value.x=window.innerWidth-e.value-30),a.value.y>=window.innerHeight&&(a.value.y=window.innerHeight-e.value-30)}return C("resize",v),M(v),(n,t)=>o(c)&&o(w)&&o(W)!=="none"?(j(),S("div",{key:0,class:"fixed z-10",style:l(o(p))},[s("div",{ref_key:"frame",ref:d,class:"rounded-full shadow bg-gray-400 bg-opacity-10 overflow-hidden object-cover",style:l(o(b))},[s("video",{ref_key:"video",ref:r,autoplay:"",muted:"",volume:"0",class:"object-cover min-w-full min-h-full rounded-full",style:{transform:"rotateY(180deg)"}},null,512)],4),s("div",{ref_key:"handler",ref:u,class:H(["absolute bottom-0 right-0 rounded-full bg-main shadow opacity-0 shadow z-30 hover:opacity-100 dark:border dark:border-true-gray-700",o(y)?"!opacity-100":""]),style:l(o(g))},null,6)],4)):$("v-if",!0)}}),Y=B(E,[["__file","/home/runner/work/web-ukazky/web-ukazky/node_modules/@slidev/client/internals/WebCamera.vue"]]);export{Y as default};
