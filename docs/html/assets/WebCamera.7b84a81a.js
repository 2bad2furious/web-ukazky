import{d as b,i as _,e as k,X as f,r as o,Y as h,ae as z,b as m,af as C,p as M,h as t,ag as S,o as j,c as W,a as r,y as i,n as H,C as $}from"./index.0ad4c4d4.js";import{r as B}from"./recording.88ad2eda.js";const N=b({__name:"WebCamera",setup(D){_(k);const e=f("slidev-webcam-size",Math.round(Math.min(window.innerHeight,window.innerWidth/8))),a=f("slidev-webcam-pos",{x:window.innerWidth-e.value-30,y:window.innerHeight-e.value-30}),s=o(),l=o(),n=o(),{streamCamera:d,showAvatar:w}=B,{style:p}=h(s,{initialValue:a}),{isDragging:y}=h(l,{onMove({x:c,y:v}){e.value=Math.max(10,Math.min(c-a.value.x,v-a.value.y)/.8536)}});z(()=>{n.value&&(n.value.srcObject=d.value)},{flush:"post"});const g=m(()=>({width:`${e.value}px`,height:`${e.value}px`})),x=m(()=>({width:"14px",height:"14px",top:`${e.value*.8536-7}px`,left:`${e.value*.8536-7}px`,cursor:"nwse-resize"}));function u(){a.value.x>=window.innerWidth&&(a.value.x=window.innerWidth-e.value-30),a.value.y>=window.innerHeight&&(a.value.y=window.innerHeight-e.value-30)}return C("resize",u),M(u),(c,v)=>t(d)&&t(w)&&t(S)!=="none"?(j(),W("div",{key:0,class:"fixed z-10",style:i(t(p))},[r("div",{ref_key:"frame",ref:s,class:"rounded-full shadow bg-gray-400 bg-opacity-10 overflow-hidden object-cover",style:i(t(g))},[r("video",{ref_key:"video",ref:n,autoplay:"",muted:"",volume:"0",class:"object-cover min-w-full min-h-full rounded-full",style:{transform:"rotateY(180deg)"}},null,512)],4),r("div",{ref_key:"handler",ref:l,class:H(["absolute bottom-0 right-0 rounded-full bg-main shadow opacity-0 shadow z-30 hover:opacity-100 dark:border dark:border-true-gray-700",t(y)?"!opacity-100":""]),style:i(t(x))},null,6)],4)):$("v-if",!0)}});export{N as default};
